<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Lista de Presentes</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f2f2f2;
    }

    /* Tela de loading estilo Netflix */
    #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: black;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }

    #loadingLogo {
        width: 150px;
        animation: spin 2s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Conte√∫do principal */
    #content {
        display: none;
        padding: 20px;
    }

    header {
        width: 100%;
        padding: 10px;
        background: #fff;
        display: flex;
        justify-content: flex-end;
        box-shadow: 0 0 10px rgba(0,0,0,0.15);
        position: sticky;
        top: 0;
    }

    #loginBtn, #logoutBtn {
        font-size: 12px;
        padding: 5px 10px;
        cursor: pointer;
        background: #444;
        color: #fff;
        border: none;
        border-radius: 5px;
    }

    h2 {
        text-align: center;
    }

    .item {
        background: white;
        padding: 15px;
        margin: 10px 0;
        border-radius: 10px;
        box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }

    .controls {
        margin-top: 10px;
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .controls button {
        padding: 5px 10px;
        cursor: pointer;
    }

    .reserved-name {
        margin-top: 10px;
        font-size: 14px;
        color: green;
    }
</style>
</head>
<body>

<!-- TELA DE LOADING -->
<div id="loadingScreen">
    <img id="loadingLogo" src="logo.png" />
</div>

<!-- CONTE√öDO PRINCIPAL -->
<div id="content">
    <header>
        <button id="loginBtn">Login</button>
        <button id="logoutBtn" style="display:none;">Sair</button>
    </header>

    <h2>Lista de Presentes</h2>
    <div id="itemList"></div>
</div>

<script>
// --- TELEGRAM CONFIG ---
const TELEGRAM_TOKEN = "8559140827:AAHxA4d-MvDH-BanHYymnK2UKLRWM3KJrec";
const CHAT_ID = "-1003451773752";

function sendTelegram(msg) {
    fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: CHAT_ID, text: msg })
    });
}

// --- LOGIN ---
let logged = false;
const USER = "jvpacheco845";
const PASS = "22demaio";

loginBtn.onclick = () => {
    const user = prompt("Login:");
    const pass = prompt("Senha:");

    if (user === USER && pass === PASS) {
        logged = true;
        loginBtn.style.display = "none";
        logoutBtn.style.display = "block";
        alert("Login efetuado!");
        sendTelegram("üîì Login efetuado no sistema");
        renderItems();
    } else {
        alert("Login incorreto");
    }
};

logoutBtn.onclick = () => {
    logged = false;
    loginBtn.style.display = "block";
    logoutBtn.style.display = "none";
    renderItems();
};

// --- DADOS DOS ITENS ---
let items = [
    { name: "Jogo de Copos", quantity: 3, reservedBy: [] },
    { name: "Toalhas", quantity: 5, reservedBy: [] },
    { name: "Len√ß√≥is", quantity: 4, reservedBy: [] }
];

// --- FUN√á√ÉO PARA RENDERIZAR ITENS ---
function renderItems() {
    const list = document.getElementById("itemList");
    list.innerHTML = "";

    items.forEach((item, index) => {
        const div = document.createElement("div");
        div.className = "item";

        div.innerHTML = `
            <strong>${item.name}</strong><br>
            Quantidade dispon√≠vel: ${item.quantity}
            <div class="controls">
                <button onclick="reserve(${index})">Reservar</button>
                ${logged ? `<button onclick="increase(${index})">+</button><button onclick="decrease(${index})">-</button>` : ""}
            </div>
        `;

        if (item.reservedBy.length > 0) {
            div.innerHTML += `<div class='reserved-name'>Reservado por: ${item.reservedBy.join(", ")}</div>`;
        }

        list.appendChild(div);
    });
}

// --- RESERVAR ITEM ---
function reserve(index) {
    const item = items[index];

    if (item.quantity <= 0) {
        alert("Esgotado!");
        return;
    }

    const nome = prompt("Seu nome:");
    const end = prompt("Seu endere√ßo:");
    const tel = prompt("Seu telefone:");

    if (!nome || !end || !tel) return;

    item.reservedBy.push(nome);
    item.quantity--;

    sendTelegram(`üõç Nova reserva:
üì¶ Item: ${item.name}
üë§ Nome: ${nome}
üè† Endere√ßo: ${end}
üìû Telefone: ${tel}`);

    renderItems();
}

// --- AUMENTAR ITEM ---
function increase(index) {
    let item = items[index];
    item.quantity++;

    if (item.reservedBy.length > 0) item.reservedBy.pop();

    sendTelegram(`‚ûï Quantidade aumentada de ${item.name}`);

    renderItems();
}

// --- DIMINUIR ITEM ---
function decrease(index) {
    let item = items[index];

    if (item.quantity > 0) item.quantity--;

    sendTelegram(`‚ûñ Quantidade diminu√≠da de ${item.name}`);

    renderItems();
}

// --- TELA DE LOADING ---
setTimeout(() => {
    loadingScreen.style.display = "none";
    content.style.display = "block";
    renderItems();
}, 5000);

</script>
</body>
</html>
